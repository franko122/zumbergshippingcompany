<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <link rel="icon" href="img/cert.png">
    <link rel="stylesheet" href="style.css">
</head>
<body style="background-color: white;">
    <br> 
        <div class="nex"> 
            <h1 class="nexus">
                Get Nexus Account
            </h1>
        </div> 
        <section class="forme">
            <form id="registerForm">
                <br>
                <div class="me1">
                    <input type="text" name="name" class="input1" placeholder="Name-eg-franklin1523" required>
                </div>
                <br>
                <div class="me1">
                    <input type="password" name="password" class="input1" placeholder="Password" required>
                </div>
                <br>
                <div class="me1">
                    <input type="password" name="confirmPassword" class="input1" placeholder="Confirm password" required>
                </div>
                <br>
                <div class="me1">
                    <input type="email" name="email" class="input1" placeholder="Email" required>
                </div>
                <br>
                <div class="me1">
                    <input type="text" name="bitcoinWallet" class="input1" placeholder="Bitcoin wallet address" required>
                </div>
                <br>
                <div class="me1">
                    <input type="text" name="ethWallet" class="input1" placeholder="Eth wallet address" required>
                </div>
                <br>
                <div class="me1">
                    <input type="text" name="dogeAddress" class="input1" placeholder="Doge address" required>
                </div>
                <br>
                <div class="me1">
                    <input type="text" name="whorefcode" class="input1" placeholder="Who Refered you code  Optional">
                </div>
                <br>
                <div class="me1">
                    <input type="checkbox" name="terms" required>
                    I accept Nexus Company <a href="terms.html" style="color: #ff6b6b; text-decoration: none;">terms of service</a>
                </div>
                <br>
                <div class="mit">
                    <button type="submit" class="mity">
                        <b>Submit</b>
                    </button>
                </div>
            </form>
            <br>
            <div id="errorMessage" style="color: red; text-align: center;"></div>
            <div id="successMessage" style="color: green; text-align: center;"></div>
            <br>
                <div class="mit"> 
                    <a  style="color: white; text-decoration: none;" href="/login.html">
                <button class="mity">

                         <b>
                        Login
                    </b>
                </button>
            </a>
                </div>
                <br>
                     <div class="mit">
                         <a  style="color: white; text-decoration: none;" href="./index.html">
                <button class="mity">

                         <b>
                        Home
                    </b>
                </button>
            </a>
            </div>
        </section>
</body>
</html>
<!--Start of Tawk.to Script-->
<script type="text/javascript">
var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/6931c983b40f0c197a3061c9/1jbl7mcoa';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();
</script>
<!--End of Tawk.to Script-->
    <script>
        // Check if user is already logged in
        if (localStorage.getItem('user')) {
            window.location.href = './dash.html';
        }

        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);

            // Clear previous error messages
            document.getElementById('errorMessage').innerHTML = '';

            // Basic password confirmation check
            if (data.password !== data.confirmPassword) {
                document.getElementById('errorMessage').innerHTML = 'Passwords do not match';
                return;
            } 
            // Remove confirmPassword from data
            delete data.confirmPassword;
            delete data.terms; // Remove terms checkbox

            // Ensure isAdmin is boolean (default false)
            data.isAdmin = false;

            // Simulate successful registration by saving mock user data to localStorage
            const mockUser = {
                _id: 'mock_' + Date.now(),
                name: data.name,
                email: data.email,
                balance: 0,
                earning: 0,
                isAdmin: false,
                myRefCode: 'REF' + Math.random().toString(36).substr(2, 6).toUpperCase(),
                bitcoinWallet: data.bitcoinWallet,
                ethWallet: data.ethWallet,
                dogeAddress: data.dogeAddress,
                whorefcode: data.whorefcode || ''
            };
            localStorage.setItem('user', JSON.stringify(mockUser));

            document.getElementById('successMessage').innerHTML = 'Registration successful! Redirecting...';

            // Redirect to dashboard
            setTimeout(() => {
                window.location.href = './dash.html';
            }, 2000);
        });
        </script>
